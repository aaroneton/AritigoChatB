# AritigoChatB
Estratégias de Fortalecimento da Atenção Primária: Usos da Linguagem de Programação para Melhorar e Otimizar os Cuidados e Qualidade Hospitalar

Resumo
	Os Chatbots estão presentes em aplicativos de mensagens como ferramentas preciosas para empresas de todos os nichos, de forma a responder de forma rápida e independente do horário que foi acionada. O mesmo processo foi realizado pelo presente trabalho com o intuito de realizar o registro de temperatura e dispor em planilhas para o acompanhamento em tempo real, cujo algarismo desenvolvido conseguiu fazer a ponte entre o aplicativo Telegram e Google Planilhas e cumprir as normativas estabelecidas pelas fiscalizadoras.
Palavras-Chave: Chatbot; Monitoramento de Temperatura; Telegram
Introdução:
Segundo Alves (2021) os Chatbots, robô ou bots são unidades de conversa, que emulam um usuário de aplicativo e se comportam como um ser humano, a resposta que o Chatbot responde pode ser programada ou ser gerada por inteligência artificial no ato da conversa.
Um grande exemplo de utilização de Chatbot é a empresa Magazine Luiza, que utilizou dessa ferramenta para a ajudar durante a venda e o pós venda, de forma a melhorar a agilidade e mitigar erros humanos que possam ser cometidos. Os Chatbots estão sempre disponíveis, e conseguem de maneira prática automatizar e padronizar dados fornecidos (WEBCOMPANY, 2023).
Concordantemente o uso de mensageiros como o WhatsApp e Telegram estão em constante alta no Brasil e no mundo como um todo, com o crescimento acentuado de 160% no início da pandemia de Sars-Cov2, especialmente na área de atendimento ao cliente, com o aumento de 50%, quando comparado ao ano de 2019. Um dos principais motivos para o aumento do uso dessas ferramentas é o atendimento automatizado por um bot que proporciona agilidade e facilidade (Thiago Lavado, 2020).
No tocante ao ambiente farmacêutico, a Resolução da Diretoria Colegiada (RDC) n° 786/2023, diretriz que rege o funcionamento de laboratórios de análises clínicas, determina que insumos termossensíveis devem ser acondicionados sob refrigeração durante todo o período de funcionamento do estabelecimento de saúde, objetivando-se manter a eficácia, segurança e qualidade dos mesmos. Simultaneamente deve-se realizar o registro de temperatura durante todo o período de funcionamento do estabelecimento de saúde, seja em meio físico ou eletrônico, conforme os artigos 83, 62 e 63, da mesma legislação (Agência de Vigilância Sanitária – ANVISA, 2023).
Diante do exposto, o presente trabalho teve por objetivo utilizar das ferramentas de Mensageiros, conjuntamente com a tecnologia de Chatbot para realizar o registro de temperatura de refrigeradores em estabelecimentos de saúde, tendo em vista o cumprimento da RDC n°786/ 2023 e visando a agilidade, fidedignidade dos valores e fácil investigação e apuração de resultados.
Materiais e Métodos:	
Para o delineamento da arquitetura do sistema de registro, foi necessário escolher uma plataforma de mensagens que possa gerar e configurar um Chatbot. Dentre as opções disponíveis, existem as plataformas WhatsApp e Telegram que conseguem gerar e configurar tais ferramentas, entretanto a plataforma escolhida foi o Telegram devido à extensa biblioteca e código aberto, com a possibilidade de comunicação entre diversos outros aplicativos de forma gratuita ou de baixo custo, quando comparado ao WhatsApp. 
	Posteriormente a escolha do mensageiro foi escolhido o Software para receber os dados advindos das mensagens dos usuários que utilizarão do Chatbot para relacionar os dados. Devido a possibilidade de programação, compartilhamento, monitoramento e integração entre aplicativos, foi escolhido o Google planilhas conjuntamente com o Google Apps Script.
Figura 1: Fluxograma do registro de temperatura. Fonte: Desenvolvido pelo Autor.

	Conforme a Figura 1 o conceito se descreve em: o usuário, que irá realizar a aferir a temperatura, enviar o valor da temperatura ao bot desenvolvido e o Chatbot irá registrar o valor recebido em planilha, e informará o registro dos dados ao usuário que fez a leitura.
Após a escolha das ferramentas, iniciou-se a criação do Chatbot pelo Telegram. Para essa etapa, foi pesquisado no próprio aplicativo de mensagens o “Usuário” @BotFather, ferramenta essa, disponibilizada pelo próprio aplicativo, permite a criação de Chatbot pela plataforma e sua integração. Com o BotFather disponível, foi seguido o passo-a-passo para a criação do bot, os passos seguidos são disponibilizados pelo próprio aplicativo, dessa forma determina-se o nome, a descrição, imagem, comandos e chave Token do robô. 
Conforme a figura 2, o bot criado para desempenhar a função tem o seu nome definido e sua descrição, assim como um comando definido.

Figura 2: Capturas de tela do Chatbot criado com o uso do BotFather. Fonte: Desenvolvido pelo Autor.
	Ao termino da criação do Chatbot no aplicativo, iniciou-se a etapa de integração com as planilhas dos servidores Google, para isso foi consultado a biblioteca de funções do Telegram e coletado as funções necessárias para que se possa fazer a integração entre dos dois sistemas, através do próprio site do aplicativo de mensagens (Telegram, 2023).
		A programação do bot é feita utilizando a linguagem de programação JavaScript no programa, Google Apps Script, utilizando, principalmente, a função WebHook, a qual funciona com um “gancho” capaz de comunicar através de um endereço eletrônico com outros servidores e programas, conforme as linhas de código da Figura 3 e no repositório GitHub().
 
Figura 3: Captura de Tela Parcial do Código Utilizado. Fonte: Desenvolvido pelo Autor.
	Com a conclusão da programação e finalização da prototipagem, iniciou-se a etapa da construção da estrutura da planilha que irá receber os dados advindo das mensagens, em que se resultou no seguinte modelo (Figura 4).
Figura 4: Captura de Tela da disposição e modelo da planilha. Fonte: Desenvolvido pelo Autor.
	Em consideração ao exposto, foi finalizada a etapa da criação do Chatbot com a implementação da programação e inicio da fase de testes e coleta de dados

Resultados:
	O processo de criação do código findou-se no dia 30 de agosto de 2023, e consequentemente iniciou-se a etapa de testes até o dia 15 de setembro de 2023 na área técnica do Laboratório de Análises Clinicas do Hospital de Aeronáutica de Canoas, totalizando 9 dias de coleta de dados, sendo uma medição por dia.
Durante a coleta de dados para integração, foi digitado no aplicativo de mensagem os valores em uma determinada ordem, em que cada valor foi separado com um espaço simples, similar ao se digitar um texto separando as palavras por espaço, contudo, para se registrar efetivamente as temperaturas coletadas é necessário redigir antes o comando: /Geladeiras. Por exemplo: /Geladeiras 3,9 15 26 14. Após se redigir a mensagem, a mesma foi enviada e em segundos estava registrada na planilha desenvolvida. 


Figura 5: Integração entre mensagens e os dados recebidos. Fonte: Desenvolvido pelo Autor
	Ao de digitar /Geladeiras, o sistema subtende que os valores devem ser computados da Aba Geladeiras, e, automaticamente, seleciona a aba correta de realiza a escrita dos valores. Caso se deseje efetuar o registro em outra aba, o comando /Micro fará que os valores fiquem na planilha Micro, dessa forma, possibilitou a segregação de outros setores com a utilização do mesmo bot.
	Com o intuito de auxiliar o usuário fora desenvolvido o comando /ajuda cujo propósito é instruir o usuário como se deve fazer o registro e a ordem correta de cada valor. Ao se digitar tal comado o Chatbot responde com a seguinte frase: 
“Para realizar o registro de temperatura selecione a aba correta (/Geladeiras ou /Micro) e digite o valor de cada termometro, separando cada valor com espaço. Registre os valores na ordem correta. Após digitar, envie a mensagem e os valores serão registrados. Ordem Geladeiras: Gel.2; Temp. Min.; Temp. Max; Soroteca; Gel 5; Cong. 4; Gel. 8; Cong 7. Ordem Micro: Ainda a definir”.
	Concordantemente à integração entre plataformas, ainda foi possível gerar um mecanismo de feedback, ou seja, uma resposta ao termino da leitura das temperaturas observadas, esse mecanismo diz para qual planilha fora enviado os valores e quais foram os valores registrados, tal mecanismo pode ser observado na Figura 5, onde o bot responde o usuário, de forma a mitigar os erros que possam vir a acontecer ou que ocorreram na digitação de dados. Afim de identificar qual usuário fez a leitura, a programação desenvolvida utiliza a própria identificação do Telegram, ou seja, não é necessário a usuário se identificar, uma vez que seu nome já fora escrito durante o cadastro no app.
	Diante disso, ainda foi observado a capacidade de se aplicar formulas na planilha, em que se pode ser utilizada com os dados importados por mensagem, assim, gerando gráficos e outros elementos visuais, como demonstrado na figura 6. 
Figura 6: Gráfico de destruição linear do Registro de temperaturas. Fonte: Desenvolvido pelo Autor
	

Conclusão:
	Diante do exposto o estudo conseguiu desenvolver um Chatbot capaz de registrar as temperaturas e fixar tais dados em planilha como preconiza a legislação vigente, demonstrando, portanto, a capacidade dessa ferramenta de auxiliar e agilizar ações dentro do ambiente hospitalar. 
	Além disso, tal ferramenta desenvolvida é capaz não, somente, registrar número, mas também, qualquer palavra digitada e enviada. Assim sua funcionalidade se estende a quaisquer dados que possa ser disposto em documentos, seja planilhas ou em documento de escrita padrão. Dessa forma reduzindo o uso de papel, uma vez que, os meios eletrônicos podem ser usados como documentos oficiais e de mesma validade que o físico.
	Contudo, mais estudos devem ser realizados para melhorar ou desenvolver novas formas de registro, visando o cumprimento da legislação e melhoria no atendimento e no sistema de saúde como um todo, tais como a aplicação de microcontroladores Arduino para automatizar a coleta de dados, sem a presença de um usuário para realizar a leitura, ou de inteligência artificial para se lidar com o banco de dados ciado, ou ainda com a junção dos dois últimos exemplos.

Referências Bibliográficas
ALVES, Amanda Oliveira. Uso de Chatbots para Apoio ao Atendimento de Clientes no Aplicativo Telegram. 2021. 32 f. TCC (Graduação) - Curso de Bacharelado em Ciência da Computação, Ciência da Computação, Universidade de Brasília, Brasília, 2021.
AGÊNCIA NACIONAL DE VIGILÂNCIA SANITÁRIA – ANVISA. Resolução da Diretoria Colegiada nº 786, de 2023. Dispõe sobre os requisitos técnicosanitários para o funcionamento de Laboratórios Clínicos, de Laboratórios de Anatomia Patológica e de outros Serviços que executam as atividades relacionadas aos Exames de Análises Clínicas (EAC) e dá outras providências. Rdc Nº 786, de 5 de Maio de 2023. Brasília: Ministério da Saúde - Ms, 05 maio 2023.
TELEGRAM (Emirados Árabes Unidos). Perguntas Frequentes: o que é telegram?. O que é Telegram?. Disponível em: https://telegram.org/faq/br#p-o-que-e-telegram-o-que-faco-aqui. Acesso em: 16 set. 2023.
TELEGRAM. Telegram APIs. Disponível em: https://core.telegram.org/api. Acesso em: 16 set. 2023.
THIAGO LAVADO (Brasil). Revista Exame. Resolve no WhatsApp: mensageiro cresce 90% como canal de suporte no Brasil. 2020. Disponível em: https://exame.com/tecnologia/resolve-no-whatsapp-mensageiro-cresce-90-como-canal-de-suporte-no-brasil/. Acesso em: 17 set. 2023.
WEBCOMPANY (São Paulo). CHATBOT MAGAZINE LUIZA: CONHEÇA O GRANDIOSO SUCESSO DA LU. Disponível em: https://webcompany.com.br/chatbot-magazine-luiza-conheca-o-grandioso-sucesso-da-lu/. Acesso em: 16 set. 2023.

